# نتیجه - PR #5 (Saffarnejad)
نویسنده: `Saffarnejad`
لینک: https://github.com/dotin-challenge/dashboard-service-optimization/pull/5
زبان: فارسی | [English](./result.md)

## خلاصه
پیاده‌سازی مبتنی بر Console Host با `IMemoryCache` و جلوگیری از Stampede به کمک `SemaphoreSlim` و double-check. در cache-hit، ورودی کش با `Sliding=30m` و `Absolute=1h` دوباره ثبت می‌شود و هر دو پنجره روی هر خواندن تازه‌سازی می‌گردد. کار سنگین ۳–۵ ثانیه‌ای شبیه‌سازی شده و رویداد حذف کش ثبت می‌شود.

طبق README، هر خواندن باید ۳۰ دقیقه تمدید شود. این پیاده‌سازی با تازه‌سازی Absolute روی خواندن، سقف مطلق مؤثر ایجاد نمی‌کند و با نیت مسئله همسو است (هرچند یک نوشتن مجدد روی hit دارد).

## امتیازدهی
| معیار | وزن | امتیاز (0-100) | وزنی | توضیحات |
|------|-----|-----------------|------|---------|
| درستی پیاده‌سازی | 40% | 92 | 36.8 | Sliding 30m + refresh absolute؛ Stampede کنترل شده |
| کیفیت کد و خوانایی | 25% | 82 | 20.5 | چندین نوع در یک فایل؛ نام‌گذاری واضح |
| همزمانی و مدیریت خطا | 10% | 88 | 8.8 | قفل + double-check؛ مدیریت خطا حداقلی |
| کارایی و رفتار کش | 10% | 88 | 8.8 | سربار اندک از reset روی hit؛ رفتار مناسب |
| مستندسازی | 5% | 50 | 2.5 | README با مشکل encoding/کامل نبودن |
| سرعت ارسال | 5% | 0 | 0.0 | خارج از سه نفر اول |
| مجموع |  |  | 77.4 |  |

## نقاط قوت
- جلوگیری از Stampede و تازه‌سازی TTL مطابق نیت مسئله.
- لاگ‌گیری رویداد حذف و زمان‌بندی‌ها.
- کد تمیز و ساده.

## موارد قابل بهبود
- تفکیک کلاس‌ها در فایل‌های جدا؛ افزودن API در صورت نیاز.
- مدیریت خطای ساختاریافته و propagation `CancellationToken`.
- در صورت کفایت Sliding-only، از reset غیرضروری روی hit بپرهیزید.
- رفع مشکل encoding README و تکمیل دستورالعمل اجرا/آزمون.

## توضیحات امتیاز
- Correctness: تمدید ۳۰ دقیقه‌ای و عدم سقف مطلق رعایت شده است.
- Quality: چندین نوع در یک فایل؛ ولی خوانا.
- Concurrency/Error: قفل و double-check مناسب؛ خطاها حداقلی.
- Performance: reset روی hit سربار اندک دارد.
- Docs: README ناقص/دارای مشکل.

