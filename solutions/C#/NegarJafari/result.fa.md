# نتیجه - PR #12 ([Solution] High-Traffic Dashboard Optimization - NegarJafari)
نویسنده: `NegarJafari`
لینک: https://github.com/dotin-challenge/dashboard-service-optimization/pull/12
زبان: فارسی | [English](./result.md)

## خلاصه
Minimal API با سرویس کش `DashboardCacheService` که به کمک `ConcurrentDictionary<string, Lazy<Task<DashboardDto>>>` از Stampede جلوگیری می‌کند. سیاست TTL: انقضای اولیه ۱ ساعت؛ در hit قبل از انقضا، ورودی با انقضای مطلق جدید ۳۰ دقیقه از زمان خواندن بازنویسی می‌شود (تمدید نامحدود بر اساس خواندن). در صورت انقضا، داده کهنه بازگردانده و بازتولید در پس‌زمینه انجام می‌شود (SWR).

این رفتار با نیت README برای تمدید ۳۰ دقیقه‌ای روی هر خواندن همسو است و از Stampede جلوگیری می‌کند.

## امتیازدهی
| معیار | وزن | امتیاز (0-100) | وزنی | توضیحات |
|------|-----|-----------------|------|---------|
| درستی پیاده‌سازی | 40% | 92 | 36.8 | تمدید ۳۰ دقیقه‌ای بدون سقف؛ SWR؛ ضد-Stampede |
| کیفیت کد و خوانایی | 25% | 88 | 22.0 | سرویس تمیز؛ DTO جداگانه؛ خلاصه |
| همزمانی و مدیریت خطا | 10% | 88 | 8.8 | Lazy per-key؛ مدیریت خطا و لاگ پایه |
| کارایی و رفتار کش | 10% | 90 | 9.0 | پاسخگو و کارا زیر بار |
| مستندسازی | 5% | 60 | 3.0 | README موجود؛ نیاز به گام‌های اجرا |
| سرعت ارسال | 5% | 0 | 0.0 | خارج از سه نفر اول |
| مجموع |  |  | 79.6 |  |

## نقاط قوت
- تمدید نامحدود بر اساس خواندن بدون سقف مطلق.
- جلوگیری از Stampede با Lazy مشترک؛ SWR برای UX بهتر.
- کد ساده و مسئولیت‌های روشن.

## موارد قابل بهبود
- پاسخ‌های خطای ساختاریافته و لاگ‌های دقیق‌تر (hit/miss).
- دستورالعمل اجرای واضح و خروجی نمونه.
- callback حذف برای مشاهده‌پذیری.

## توضیحات امتیاز
- Correctness: منطبق با TTL و ضد-Stampede؛ SWR افزاینده UX.
- Quality: تمیز و خوانا.
- Concurrency/Error: deduplication بر پایه Lazy؛ خطا عمومی.
- Performance: کارا زیر بار.
- Docs: نیازمند تکمیل.

